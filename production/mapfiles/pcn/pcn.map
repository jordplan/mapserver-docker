#
# Start of map file
#
MAP
  NAME "Jordplan PCN"
  STATUS ON
  #SIZE 600 600
  EXTENT 3.5 57 32 72
  UNITS DD
  ##SHAPEPATH "data"
  IMAGECOLOR 255 255 255

  IMAGETYPE PNG

  DEBUG 1
  CONFIG "MS_ERRORFILE" "/tmp/pcn_mapserver_error"

  FONTSET "/etc/mapserver_fontset"

  #
  # Start of web interface definition (including WMS enabling metadata)
  #
  WEB
    ##MINSCALE 1000
    ##MAXSCALE 1550000

    # change the next two lines to match your setup
    IMAGEPATH "/var/lib/mapserver/tmp/"
    IMAGEURL "/mapserver/tmp/"

    METADATA
      WMS_TITLE "Jordplan PCN"
      WMS_ABSTRACT "Jordplan"
      WMS_ACCESSCONSTRAINTS "Tjenesten skal kun benyttes av de som har fï¿½tt eksplisitt tillatelse av Jordplan AS"

      # change this value to match your setup
      WMS_ONLINERESOURCE "https://jordplan.no/wms/pcn"
      WMS_SRS "EPSG:4326 EPSG:4258 EPSG:27391 EPSG:27392 EPSG:27393 EPSG:27394 EPSG:27395 EPSG:27396 EPSG:27397 EPSG:27398 EPSG:32631 EPSG:32632 EPSG:32633 EPSG:32634 EPSG:32635 EPSG:32636 EPSG:25831 EPSG:25832 EPSG:25833 EPSG:25834 EPSG:25835 EPSG:25836 EPSG:3785 EPSG:3857"
      WMS_ENABLE_REQUEST "*"   ##necessary
      WMS_FEATURE_INFO_MIME_TYPE "text/html"
    END
  END

  PROJECTION
    "init=epsg:4326"
  END

	SYMBOL
		NAME 'hatch-test'
		TYPE HATCH
	END

  #
  # Start of layer definitions
  #
  LAYER
    NAME "pcn"
    STATUS ON
    CONNECTIONTYPE POSTGIS
    CONNECTION "host=db1 port=5432 dbname=drupal user=mapserver password=AGj3439ZhQXCR"
    DATA "the_geom FROM pcn_property_area USING srid=32632 USING unique id"
    #CLASSITEM 'kategori'
    LABELITEM "label"
    TYPE POLYGON
    EXTENT 3.5 57 32 72
    CLASS
      #LABEL
      #  TEXT '[kategori]'
      #END
      STYLE
        COLOR 230 230 230
        OUTLINECOLOR 230 230 230
				OPACITY 50
      END
			STYLE
				SYMBOL 'hatch-test'
				COLOR 255 100 100
				ANGLE 45
				SIZE 10
				WIDTH 2
			END
			LABEL
 				TYPE TRUETYPE
 				FONT verdana
 				SIZE 8
 				ANTIALIAS TRUE
 				COLOR 0 0 0
        BUFFER 50
        MINFEATURESIZE 100
 				#OUTLINECOLOR 0 0 0
 				POSITION AUTO
      END
    END

    HEADER "pcn_head.html"
    TEMPLATE "pcn.html"
    FOOTER "pcn_tail.html"

    METADATA
      WMS_TITLE "Jordplan PCN"
      WMS_ABSTRACT "PCN in Jordplan"
      wms_include_items "kommunenr,gnr,bnr,kategori,year"
    END
  END # pcn

END # Map File
